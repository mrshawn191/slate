<!doctype html>
<html>
  <head>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W92MC5');</script>
<!-- End Google Tag Manager -->

<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon-9dabc470.png">
<link rel="icon" type="image/png" href="/images/favicon/favicon-32x32-b71a5283.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon/favicon-16x16-ea515fe9.png" sizes="16x16">
<link rel="manifest" href="/images/favicon/manifest.json">
<link rel="mask-icon" href="/images/favicon/safari-pinned-tab-fb883d2e.svg" color="#8247b5 ">
<meta name="theme-color" content="#ffffff ">

<!-- Site version (latest commit): 865681dcbcfb33b881a7b0871215a0703cc4ec7e
 -->

<title>Recurring Payment API - Overview</title>

<link href="../../../../stylesheets/ui.bambora.1.0.3-13e3506d.css" rel="stylesheet" type="text/css" />
<link href="../../../../stylesheets/bambora_ui_sass_overwrite-d859adf4.css" rel="stylesheet" type="text/css" />
<link href="../../../../stylesheets/portal-5e95ed43.css" rel="stylesheet" type="text/css" />
<link href="../../../../stylesheets/page/tutorial-c59b694d.css" rel="stylesheet" type="text/css" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js">
</script>

<script src="../../../../javascripts/all-654c8dcb.js" type="text/javascript"></script>

  </head>

  <body class="slate slate_docs slate_docs_guides slate_docs_guides_recurring_payment slate_docs_guides_recurring_payment_index">

    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-W92MC5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    

<nav class="nav-pane nav-fixed">

    <!-- Hamburger icon --> 
    <a href="#" class="hamburger-icon"><svg width="19" height="14" viewBox="0 0 19 14" xmlns="http://www.w3.org/2000/svg"><title>list</title><path d="M7.968 2.28h10.245V0H7.968v2.28zM0 7.975h18.213v-2.28H0v2.28zm0 5.696h10.245v-2.278H0v2.278z" fill="#84898A" fill-rule="evenodd"/></svg></a>

    <!-- Logo -->
    <div class="pull-left nav-links">
        <a href="/slate/docs/" class="logo">
                <img src="../../../../images/svg/zebraffe-dark-dev-05ffe493.svg" />
        </a>
    </div>

    <div class="header-contents">

    <!-- Links --> 
    <div class="pull-left nav-links">
                <a href="/slate/docs/guides/">Guides</a>
                <a href="/slate/docs/references/">API</a>
                <a href="/slate/docs/support/">PSP Service Reference</a>
    </div>

    <!-- Search / buttons -->
    <div class="pull-right">
        
        <span class="button-wrap">
            <a id="search-button" href="#"><svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><title>search</title><path d="M5 0a5 5 0 1 0 3.164 8.87l5.13 5.13.706-.707-5.13-5.129A5 5 0 0 0 5 0m0 1c2.206 0 4 1.794 4 4 0 .934-.313 1.809-.904 2.53l-.254.312-.312.254A3.952 3.952 0 0 1 5 9C2.794 9 1 7.206 1 5s1.794-4 4-4" fill="#454545" fill-rule="evenodd"/></svg></a>
        </span>

            <span class="button-wrap">
                    <a href="/slate/docs/sign_up/" class="btn btn-small btn-secondary" >
                        Sign up
                    </a>
            </span>
            <span class="button-wrap">
                    <a href="https://web.na.bambora.com" class="btn btn-small" >
                        Login
                    </a>
            </span>

        <div class="dropdown-nav dropdown-open-on-hover" role="navigation" 
id="region-switcher">
    North America
    <ul role="menu">
        
        <li role="menuitem">
            <a href="https://developer.bambora.com/apac" class="not-new-tab-for-link">
                Asia-Pacific
            </a>
        </li>

        <li role="menuitem">
            <a href="https://developer.bambora.com/europe" class="not-new-tab-for-link">
                Europe
            </a>
        </li>
    </ul>
</div>
    </div>

    </div>
</nav>

<div id="search-overlay">
  <a href="#" id="close-search-overlay"><svg width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg"><title>close</title><path d="M1.608 0L0 1.61l7.498 7.505L0 16.62l1.608 1.61 7.498-7.505 7.498 7.505 1.608-1.61-7.498-7.505 7.499-7.505L16.604 0 9.106 7.507z" fill="#616668" fill-rule="evenodd"/></svg></a>

  <div class="container">

    <form>
      <div class="form-group">
        <input type="text" id="search" placeholder="Search..." width="100%", autocomplete="off" >
      </div>
    </form>

    <div id="result-count"></div>

    <div class="list-group">
      <div class="row">
        <div class="col-md-6 col-md-offset-3">
          <ul class="search-results"></ul>
        </div>
      </div>
    </div>

  </div>
</div>



    <div class="container">

      <a id="edit-on-github" href="https://github.com/bambora/dev.na.bambora.com/edit/staging/source/slate/docs/guides/recurring_payment/index.md">
  Edit this page
</a>


<!-- Modal apears on link click -->
<div class="modal-overlay">
  <div class="modal github-modal" role="dialog">
      <h3 class="js-toc-ignore">Edit on Github</h3>

      <p> 
      To propose changes to the Developer Portal click the link below and follow these steps: 
      </p>

      <ol>
        <li>Sign in to Github. You will have to create an account if you don't already have one.</li>
        <li>Click the <strong>Fork this repository and propose changes </strong>button.</li>
        <li>Make your proposed changes to the file. Content is formatted with <a href="http://commonmark.org/help/">Markdown.</a></li>
        <li>At the bottom of the page, optionally add a title and description to your changes, and click the <strong>Propose file change button</strong>.</li>
        <li>On the next page, click <strong>Create pull request</strong>, and then click it again.</li>
        <li>You're done! Someone will review your changes and they will appear on the site shortly.</li>
      </ol>

      <div class="btn-row">
          <a href="#" class="btn continue-to-github" target="_blank">Continue to Github</a>
          <button class="btn btn-secondary close-modal">Cancel</button>
      </div>
  </div>
</div>      
          <div class='breadcrumb-trail'><span><a href='/slate/'>Slate</a></span><span class='chevron'> / </span><span><a href='/slate/docs/'>Docs</a></span><span class='chevron'> / </span><span><a href='/slate/docs/guides/'>Guides</a></span><span class='chevron'> / </span><span class='this-page'>Recurring Payment</span></div>
 
      


<div class="nav-wrapper">
<nav class="nav-left nav-sticky nav-vertical">

  <div class="mobile-close"><svg width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg"><title>close</title><path d="M1.608 0L0 1.61l7.498 7.505L0 16.62l1.608 1.61 7.498-7.505 7.498 7.505 1.608-1.61-7.498-7.505 7.499-7.505L16.604 0 9.106 7.507z" fill="#616668" fill-rule="evenodd"/></svg></div>


      <ul>

          <li data-nav-title="/slate/docs/guides/recurring_payment/" class="active">
            <a href="/slate/docs/guides/recurring_payment/" class="nav-top-heading">
              Overview 
            </a>

              <div class="page-included js-toc"></div>
          </li>

          <li data-nav-title="/slate/docs/references/recurring_payment/" class="">
            <a href="/slate/docs/references/recurring_payment/" class="nav-top-heading">
              References 
            </a>

          </li>
      </ul>
</nav>
</div>

<!-- button to click on small screen to show toc -->
<div class="show-toc">
  Contents
</div>





      <div class="row">
          <div class="col-md-9 col-md-offset-3 js-toc-content">

          <div class="markdown">
            <h1 id="recurring-payment">Recurring Payment</h1>

<p>The Recurring Payment API allows you to schedule series of payments to automatically charge your customers every day, week, month or year.</p>

<p>Note: The Recurring Payment API supports basic use cases only. For all other recurring payments we recommend that you handle scheduling on your side while using our Payment Profiles to store card data.</p>

<h2 id="create">Create</h2>

<p>Create from a Payment Profile or with a single-use token returned by Custom Checkout.</p>

<p>Scheduling is set by both <code class="prettyprint">rbBillingPeriod</code> and <code class="prettyprint">rbBillingIncrement</code> parameters. The period is unit of measurement for  the frequency of the payment: day, week, month or year. The increment is the number of periods between each payment. For example, you may want a payment to recur once a month or every 3 months.</p>

<p>A billing cycle can begin on any day or date. If you are setting a monthly billing cycle, you can set the last day of each month as the billing date with the <code class="prettyprint">rbEndMonth</code> parameters.</p>

<p>You can set an end date for a billing cycle using the <code class="prettyprint">rbExpiry</code> parameter, or you can set the payment to continue indefinitely with the <code class="prettyprint">rbNeverExpires</code>.</p>

<p>You can defer the first charge by setting both <code class="prettyprint">rbCharge</code> and <code class="prettyprint">rbFirstBilling</code> parameters. The first parameter controls whether or not to charge the card immediately. The second sets the date for the first charge.</p>

<p>You can prorate the first payment by setting both <code class="prettyprint">rbFirstBilling</code> and <code class="prettyprint">rbSecondBilling</code> parameters. The value of the first payment will be calculated according to the difference between the first and second payment dates and the set interval for the payment.</p>

<h3 id="sample-request">Sample request</h3>
<pre class="highlight plaintext"><code>curl -X POST \
  'https://web.na.bambora.com/scripts/process_transaction.asp?requestType=BACKEND&amp;merchant_Id=your_merchant_id&amp;passcode=your_payment_api_passcode&amp;trnType=P&amp;singleUseToken=any_single_use_token&amp;trnAmount=10&amp;trnRecurring=1&amp;rbBillingPeriod=D&amp;rbBillingIncrement=30&amp;trnCardOwner=Rosanna%20Sylvester'
</code></pre>

<h3 id="sample-response">Sample response</h3>
<pre class="highlight plaintext"><code>trnApproved=1&amp;trnId=10000677&amp;messageId=1&amp;messageText=Approved&amp;trnOrderNumber=10000677&amp;authCode=TEST&amp;errorType=N&amp;errorFields=&amp;responseType=T&amp;trnAmount=10&amp;trnDate=9%2F12%2F2017+8%3A49%3A34+PM&amp;rbAccountId=6217641&amp;avsProcessed=0&amp;avsId=U&amp;avsResult=0&amp;avsAddrMatch=0&amp;avsPostalMatch=0&amp;avsMessage=Address+information+is+unavailable%2E&amp;cvdId=1&amp;cardType=VI&amp;trnType=P&amp;paymentMethod=CC&amp;ref1=&amp;ref2=&amp;ref3=&amp;ref4=&amp;ref5=&amp;hashValue=fa879fac34852060e908899b9c634608931f97ad
</code></pre>

<h2 id="modify">Modify</h2>

<p>You can modify a recurring payment to change its amount or schedule. You can put a payment on hold or you can close it.</p>

<p>If a recurring payment is disabled and later reactivated back, payments will be charged unless the <code class="prettyprint">processBackPayments</code> parameter is passed.</p>

<p>You can only use actual card data when updating the payment card associated with a recurring payment account. Using either a single-use token, or a Payment Profile customer code will not work. We recommend that you create a new recurring payment if you need to change card data.</p>

<p>You cannot update the payment card a recurring payment account using either a using a single-use token, or a Payment Profile. We recommend that you create a new recurring payment if you need to change card data.</p>

<h3 id="sample-request">Sample request</h3>
<pre class="highlight plaintext"><code>curl -X POST \
  'https://web.na.bambora.com/scripts/recurring_billing.asp?serviceVersion=1.0&amp;operationType=M&amp;merchantId=your_merchant_id&amp;passCode=your_recurring_payment_api_passcode&amp;rbAccountId=6217641&amp;amount=12.00'
</code></pre>

<h3 id="sample-response">Sample response</h3>
<pre class="highlight plaintext"><code>&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;response&gt;
    &lt;accountId&gt;6217641&lt;/accountId&gt;
    &lt;code&gt;1&lt;/code&gt;
    &lt;message&gt;Request successful&lt;/message&gt;
&lt;/response&gt;
</code></pre>

<h2 id="notifications">Notifications</h2>

<p>You can register for a callback when recurring payments are processed. The callback URL is set in the <a href="https://web.na.bambora.com">Member Area</a>. Click <strong>administration</strong>, then <strong>account settings</strong>, and then <strong>order settings</strong>, under <strong>Response Notification</strong>.</p>

<p>The parameters posted to the webhook are the same as those returned by the API when first creating a Recurring Account.</p>

<p><strong>Caveat:</strong> The callback is made over HTTPS using TLS 1.0 (rather than TLS 1.2).</p>

<h3 id="testing-redirects">Testing redirects</h3>

<p>You may find it helpful while testing to use tools that allow you to inspect and debug webhook requests like <a href="http://putsreq.com">PutsReq</a>.</p>
 
          
          </div>
        </div>
      </div>
    </div>

    <footer>



                Â© <a href="http://www.bambora.com/en/en/payment-solutions/" target="_blank">2017 Bambora</a>

        <div class="links">
                <a href="http://www.bambora.com/en/en/payment-solutions/customer-service/faq/terms-and-conditions/" target="_blank">Terms & Conditions</a>
        </div>
        
        <div class="pull-right">
                <a href="https://github.com/bambora/" target="_blank">Github</a>
        </div>

</footer>

    <script src="../../../../javascripts/template/tocbot_init_script-2dfca9f7.js" type="text/javascript"></script>

  </body>
</html>
