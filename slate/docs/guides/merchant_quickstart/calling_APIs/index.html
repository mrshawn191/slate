<!doctype html>
<html>
  <head>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W92MC5');</script>
<!-- End Google Tag Manager -->

<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon-9dabc470.png">
<link rel="icon" type="image/png" href="/images/favicon/favicon-32x32-b71a5283.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon/favicon-16x16-ea515fe9.png" sizes="16x16">
<link rel="manifest" href="/images/favicon/manifest.json">
<link rel="mask-icon" href="/images/favicon/safari-pinned-tab-fb883d2e.svg" color="#8247b5 ">
<meta name="theme-color" content="#ffffff ">

<!-- Site version (latest commit): 3e3b016cdc42a80421ff76a37f6f39898652edb0
 -->

<title>Calling API's</title>

<link href="../../../../../stylesheets/ui.bambora.1.0.3-13e3506d.css" rel="stylesheet" type="text/css" />
<link href="../../../../../stylesheets/bambora_ui_sass_overwrite-d859adf4.css" rel="stylesheet" type="text/css" />
<link href="../../../../../stylesheets/portal-5e95ed43.css" rel="stylesheet" type="text/css" />
<link href="../../../../../stylesheets/page/tutorial-c59b694d.css" rel="stylesheet" type="text/css" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js">
</script>

<script src="../../../../../javascripts/all-654c8dcb.js" type="text/javascript"></script>

  </head>

  <body class="slate slate_docs slate_docs_guides slate_docs_guides_merchant_quickstart slate_docs_guides_merchant_quickstart_calling_APIs slate_docs_guides_merchant_quickstart_calling_APIs_index">

    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-W92MC5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    

<nav class="nav-pane nav-fixed">

    <!-- Hamburger icon --> 
    <a href="#" class="hamburger-icon"><svg width="19" height="14" viewBox="0 0 19 14" xmlns="http://www.w3.org/2000/svg"><title>list</title><path d="M7.968 2.28h10.245V0H7.968v2.28zM0 7.975h18.213v-2.28H0v2.28zm0 5.696h10.245v-2.278H0v2.278z" fill="#84898A" fill-rule="evenodd"/></svg></a>

    <!-- Logo -->
    <div class="pull-left nav-links">
        <a href="/slate/docs/" class="logo">
                <img src="../../../../../images/svg/zebraffe-dark-dev-05ffe493.svg" />
        </a>
    </div>

    <div class="header-contents">

    <!-- Links --> 
    <div class="pull-left nav-links">
                <a href="/slate/docs/guides/" class="active">Guides</a>
                <a href="/slate/docs/references/">API</a>
                <a href="/slate/docs/support/">PSP Service Reference</a>
    </div>

    <!-- Search / buttons -->
    <div class="pull-right">
        
        <span class="button-wrap">
            <a id="search-button" href="#"><svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><title>search</title><path d="M5 0a5 5 0 1 0 3.164 8.87l5.13 5.13.706-.707-5.13-5.129A5 5 0 0 0 5 0m0 1c2.206 0 4 1.794 4 4 0 .934-.313 1.809-.904 2.53l-.254.312-.312.254A3.952 3.952 0 0 1 5 9C2.794 9 1 7.206 1 5s1.794-4 4-4" fill="#454545" fill-rule="evenodd"/></svg></a>
        </span>

            <span class="button-wrap">
                    <a href="/slate/docs/sign_up/" class="btn btn-small btn-secondary" >
                        Sign up
                    </a>
            </span>
            <span class="button-wrap">
                    <a href="https://web.na.bambora.com" class="btn btn-small" >
                        Login
                    </a>
            </span>

        <div class="dropdown-nav dropdown-open-on-hover" role="navigation" 
id="region-switcher">
    North America
    <ul role="menu">
        
        <li role="menuitem">
            <a href="https://developer.bambora.com/apac" class="not-new-tab-for-link">
                Asia-Pacific
            </a>
        </li>

        <li role="menuitem">
            <a href="https://developer.bambora.com/europe" class="not-new-tab-for-link">
                Europe
            </a>
        </li>
    </ul>
</div>
    </div>

    </div>
</nav>

<div id="search-overlay">
  <a href="#" id="close-search-overlay"><svg width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg"><title>close</title><path d="M1.608 0L0 1.61l7.498 7.505L0 16.62l1.608 1.61 7.498-7.505 7.498 7.505 1.608-1.61-7.498-7.505 7.499-7.505L16.604 0 9.106 7.507z" fill="#616668" fill-rule="evenodd"/></svg></a>

  <div class="container">

    <form>
      <div class="form-group">
        <input type="text" id="search" placeholder="Search..." width="100%", autocomplete="off" >
      </div>
    </form>

    <div id="result-count"></div>

    <div class="list-group">
      <div class="row">
        <div class="col-md-6 col-md-offset-3">
          <ul class="search-results"></ul>
        </div>
      </div>
    </div>

  </div>
</div>



    <div class="container">

      <a id="edit-on-github" href="https://github.com/bambora/dev.na.bambora.com/edit/staging/source/slate/docs/guides/merchant_quickstart/calling_APIs.md">
  Edit this page
</a>


<!-- Modal apears on link click -->
<div class="modal-overlay">
  <div class="modal github-modal" role="dialog">
      <h3 class="js-toc-ignore">Edit on Github</h3>

      <p> 
      To propose changes to the Developer Portal click the link below and follow these steps: 
      </p>

      <ol>
        <li>Sign in to Github. You will have to create an account if you don't already have one.</li>
        <li>Click the <strong>Fork this repository and propose changes </strong>button.</li>
        <li>Make your proposed changes to the file. Content is formatted with <a href="http://commonmark.org/help/">Markdown.</a></li>
        <li>At the bottom of the page, optionally add a title and description to your changes, and click the <strong>Propose file change button</strong>.</li>
        <li>On the next page, click <strong>Create pull request</strong>, and then click it again.</li>
        <li>You're done! Someone will review your changes and they will appear on the site shortly.</li>
      </ol>

      <div class="btn-row">
          <a href="#" class="btn continue-to-github" target="_blank">Continue to Github</a>
          <button class="btn btn-secondary close-modal">Cancel</button>
      </div>
  </div>
</div>      
          <div class='breadcrumb-trail'><span><a href='/slate/'>Slate</a></span><span class='chevron'> / </span><span><a href='/slate/docs/'>Docs</a></span><span class='chevron'> / </span><span><a href='/slate/docs/guides/'>Guides</a></span><span class='chevron'> / </span><span><a href='/slate/docs/guides/merchant_quickstart/'>Merchant Quickstart</a></span><span class='chevron'> / </span><span class='this-page'>Calling APIs</span></div>
 
      


<div class="nav-wrapper">
<nav class="nav-left nav-sticky nav-vertical">

  <div class="mobile-close"><svg width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg"><title>close</title><path d="M1.608 0L0 1.61l7.498 7.505L0 16.62l1.608 1.61 7.498-7.505 7.498 7.505 1.608-1.61-7.498-7.505 7.499-7.505L16.604 0 9.106 7.507z" fill="#616668" fill-rule="evenodd"/></svg></div>


      <ul>

          <li data-nav-title="/slate/docs/guides/merchant_quickstart/" class="">
            <a href="/slate/docs/guides/merchant_quickstart/" class="nav-top-heading">
              Merchant Quickstart 
            </a>

          </li>

          <li data-nav-title="/slate/docs/guides/merchant_quickstart/calling_APIs/" class="active">
            <a href="/slate/docs/guides/merchant_quickstart/calling_APIs/" class="nav-top-heading">
              Calling APIs 
            </a>

              <div class="page-included js-toc"></div>
          </li>

          <li data-nav-title="/slate/docs/guides/merchant_quickstart/Boarding/" class="">
            <a href="/slate/docs/guides/merchant_quickstart/Boarding/" class="nav-top-heading">
              Boarding 
            </a>

          </li>
      </ul>
</nav>
</div>

<!-- button to click on small screen to show toc -->
<div class="show-toc">
  Contents
</div>





      <div class="row">
          <div class="col-md-9 col-md-offset-3 js-toc-content">

          <div class="markdown">
            <h1 id="calling-payment-apis">Calling Payment APIs</h1>

<p>We&#39;ll now go through the process of performing and validating a transaction using our Payment APIs.</p>

<h2 id="requirements">Requirements</h2>

<h3 id="curl">cURL</h3>

<p>We use the command-line tool cURL for all HTTP request examples in this guide. cURL allows you make API requests without a web application, just like you would with command prompts in Windows, or Terminal on Apple computers. You can read more on cURL <a href="https://help.zendesk.com/hc/en-us/articles/229136847-Installing-and-using-cURL">here</a>.</p>

<h3 id="postman">Postman</h3>

<p>For fans of of the HTTP Client <a href="https://www.getpostman.com">Postman</a>, we offer a comprehensive <a href="../../../../resources/postman/Bambora.postman_collection.json" download>collection</a> of requests and an <a href="../../../../resources/postman/Bambora.postman_environment.json" download>environment</a>. The collection uses the pre and post request scripts to set authentication headers and record transaction IDs. Before you run any queries, you&#39;ll need to update the environment with your Merchant ID and passcodes.</p>

<blockquote>
<p>Note: Most of your Postman queries containing variables are set to return the related variable: &#39;Get Token&#39; will set the returned token in the environment.</p>
</blockquote>

<h2 id="authorization">Authorization</h2>

<p>With your Merchant ID in hand and your passcodes set, you&#39;re ready to combine them into the required Authorization header. You can use our encoder to create an authorisation header <a href="../../../forms/encode_api_passcode/">here</a>.</p>

<p><code class="prettyprint">Authorization: Passcode Base64Encoded(merchant_id:passcode)</code></p>

<h2 id="create-a-transaction">Create a transaction</h2>

<h3 id="tokenize-a-card">Tokenize a card</h3>

<p>To process credit card transactions online, you must be in compliance with standards set out by the Payment Card Industry (PCI). Tokenizing credit card details is the most effective way to reduce the scope of your PCI compliance by removing the interaction between your server and your customer&#39;s card details.</p>

<p>You can also use our hosted <a href="https://github.com/bambora/na-customcheckout">Custom Checkout</a> library to validate and tokenize all card data to further reduce scope.</p>
<pre class="highlight shell"><code>curl https://api.na.bambora.com/scripts/tokenization/tokens  <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
     "number":"4030000010001234",
     "expiry_month":"02",
     "expiry_year":"20",
     "cvd":"123"
  }'</span>
</code></pre>
<div class='table-wrap'><table class='table'><thead><tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead><tbody><tr>
<td>number</td>
<td>The 16-digit credit card number.</td>
</tr>
<tr>
<td>expiry_month</td>
<td>The 2-digit month the card expires, as it appears on the card.</td>
</tr>
<tr>
<td>expiry_year</td>
<td>The 2-digit year the card expires, as it appears on the card.</td>
</tr>
<tr>
<td>cvd</td>
<td>The 3 or 4-digit security code that appears on the back of Visa and MasterCard cards, and the front of American Express.</td>
</tr>
</tbody></table></div>
<h3 id="create-a-payment-profile">Create a Payment Profile</h3>

<p>Once you have a single-use token with payment details, you can use it to store the credit card details as a Payment Profile (multi-use token) for future payments.</p>
<pre class="highlight shell"><code>curl https://api.na.bambora.com/v1/profiles  <span class="se">\</span>
  -H <span class="s2">"Authorization: Passcode your_encoded_payment_profile_passcode"</span>  <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
      "token":{  
        "name":"John Doe",
        "code":"your_card_token",
      }
  }'</span>
</code></pre>
<div class='table-wrap'><table class='table'><thead><tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead><tbody><tr>
<td>name</td>
<td>The cardholder&#39;s first and last name as they appear on the card.</td>
</tr>
<tr>
<td>code</td>
<td>The single-use token ID.</td>
</tr>
</tbody></table></div>
<h3 id="take-a-payment">Take a payment</h3>

<p>With a single-use or multi-use token, you can charge the card.  The sample below displays a transaction for $100 using a Payment Profile.</p>
<pre class="highlight shell"><code>curl https://api.na.bambora.com/v1/payments  <span class="se">\</span>
  -H <span class="s2">"Authorization: Passcode your_encoded_payment_passcode"</span>  <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
     "amount":100.00,
     "payment_method":"payment_profile",
     "payment_profile":{
       "customer_code":"John Doe",
       "card_id":"your_customer_token",
       "complete":"true"
     }
  }'</span>
</code></pre>
<div class='table-wrap'><table class='table'><thead><tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead><tbody><tr>
<td>amount</td>
<td>The total amount of the transaction in local currency.</td>
</tr>
<tr>
<td>payment_method</td>
<td>The method for the payment, either <code class="prettyprint">card</code>, <code class="prettyprint">token</code>, or <code class="prettyprint">payment_profile</code>.</td>
</tr>
<tr>
<td>payment_profile</td>
<td>The stored information of the multi-use token.</td>
</tr>
</tbody></table></div>
<p>After your payment is sent, you can expect an HTTP response with a status code 200, and a payment response object with <code class="prettyprint">code:1, message:approved</code>. This is your confirmation the payment was approved.</p>

<p>If your transaction was not approved, check the the HTTP response code along with the message in the object. You&#39;ll only receive one of two codes from our payment gateway emulator: 1 for approved, 7 for declined.</p>

<blockquote>
<p>Note: HTTP status codes 200 and 402 mean your transaction reached the gateway. Any other response means your payment did not reach the emulator.</p>
</blockquote>

<h2 id="searching-the-transaction">Searching the transaction</h2>

<p>Within the response body , you&#39;ll find a Transaction ID. You can perform a transaction request using the Transaction ID at any future date through the Payments API.</p>
<pre class="highlight shell"><code>curl -X GET https://api.na.bambora.com/v1/payments/<span class="o">{</span>your_transaction_id<span class="o">}</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Passcode your_encoded_payment_passcode"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span>
</code></pre>

<p>If you&#39;re searching for a transaction through the API, you can search by using the date and <a href="https://dev.na.bambora.com/docs/references/payment_SDKs/analyze_payments/?shell#search-criteria-bbeb017c6f808baf89a073ba2ef7af68">up to 24 fields</a> from a transaction record.</p>
<pre class="highlight shell"><code>curl https://api.na.bambora.com/v1/reports <span class="se">\</span>
-H <span class="s2">"Authorization: Passcode your_encoded_reporting_passcode"</span>  <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="s1">'{
     "name": "Search",
     "start_date": "2017-01-01T01:01:03",
     "end_date": "2018-06-05T16:05:00",   
     "start_row": "1",
     "end_row": "2"
   }'</span>
</code></pre>

<p>Now that you&#39;re ready to accept payments, the final step is to access a full gateway and <a href="https://dev.na.bambora.com/docs/guides/merchant_quickstart/Boarding/">Go Live</a>.</p>
 
          
          </div>
        </div>
      </div>
    </div>

    <footer>



                Â© <a href="http://www.bambora.com/en/en/payment-solutions/" target="_blank">2017 Bambora</a>

        <div class="links">
                <a href="http://www.bambora.com/en/en/payment-solutions/customer-service/faq/terms-and-conditions/" target="_blank">Terms & Conditions</a>
        </div>
        
        <div class="pull-right">
                <a href="https://github.com/bambora/" target="_blank">Github</a>
        </div>

</footer>

    <script src="../../../../../javascripts/template/tocbot_init_script-2dfca9f7.js" type="text/javascript"></script>

  </body>
</html>
