<!doctype html>
<html>
  <head>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W92MC5');</script>
<!-- End Google Tag Manager -->

<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon-9dabc470.png">
<link rel="icon" type="image/png" href="/images/favicon/favicon-32x32-b71a5283.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon/favicon-16x16-ea515fe9.png" sizes="16x16">
<link rel="manifest" href="/images/favicon/manifest.json">
<link rel="mask-icon" href="/images/favicon/safari-pinned-tab-fb883d2e.svg" color="#8247b5 ">
<meta name="theme-color" content="#ffffff ">

<!-- Site version (latest commit): 9f6f881b08ad1b133002af56bc1342ed0c0a2958
 -->

<title>Recurring Payment API spec - Create endpoint</title>

<link href="../../../../stylesheets/ui.bambora.1.0.3-13e3506d.css" rel="stylesheet" type="text/css" />
<link href="../../../../stylesheets/bambora_ui_sass_overwrite-d859adf4.css" rel="stylesheet" type="text/css" />
<link href="../../../../stylesheets/portal-5e95ed43.css" rel="stylesheet" type="text/css" />
<link href="../../../../stylesheets/page/tutorial-c59b694d.css" rel="stylesheet" type="text/css" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js">
</script>

<script src="../../../../javascripts/all-654c8dcb.js" type="text/javascript"></script>

  </head>

  <body class="slate slate_docs slate_docs_references slate_docs_references_recurring_payment slate_docs_references_recurring_payment_index">

    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-W92MC5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    

<nav class="nav-pane nav-fixed">

    <!-- Hamburger icon --> 
    <a href="#" class="hamburger-icon"><svg width="19" height="14" viewBox="0 0 19 14" xmlns="http://www.w3.org/2000/svg"><title>list</title><path d="M7.968 2.28h10.245V0H7.968v2.28zM0 7.975h18.213v-2.28H0v2.28zm0 5.696h10.245v-2.278H0v2.278z" fill="#84898A" fill-rule="evenodd"/></svg></a>

    <!-- Logo -->
    <div class="pull-left nav-links">
        <a href="/slate/docs/" class="logo">
                <img src="../../../../images/svg/zebraffe-dark-dev-05ffe493.svg" />
        </a>
    </div>

    <div class="header-contents">

    <!-- Links --> 
    <div class="pull-left nav-links">
                <a href="/slate/docs/guides/">Guides</a>
                <a href="/slate/docs/references/">API</a>
                <a href="/slate/docs/support/">PSP Service Reference</a>
    </div>

    <!-- Search / buttons -->
    <div class="pull-right">
        
        <span class="button-wrap">
            <a id="search-button" href="#"><svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><title>search</title><path d="M5 0a5 5 0 1 0 3.164 8.87l5.13 5.13.706-.707-5.13-5.129A5 5 0 0 0 5 0m0 1c2.206 0 4 1.794 4 4 0 .934-.313 1.809-.904 2.53l-.254.312-.312.254A3.952 3.952 0 0 1 5 9C2.794 9 1 7.206 1 5s1.794-4 4-4" fill="#454545" fill-rule="evenodd"/></svg></a>
        </span>

            <span class="button-wrap">
                    <a href="/slate/docs/sign_up/" class="btn btn-small btn-secondary" >
                        Sign up
                    </a>
            </span>
            <span class="button-wrap">
                    <a href="https://web.na.bambora.com" class="btn btn-small" >
                        Login
                    </a>
            </span>

        <div class="dropdown-nav dropdown-open-on-hover" role="navigation" 
id="region-switcher">
    North America
    <ul role="menu">
        
        <li role="menuitem">
            <a href="https://developer.bambora.com/apac" class="not-new-tab-for-link">
                Asia-Pacific
            </a>
        </li>

        <li role="menuitem">
            <a href="https://developer.bambora.com/europe" class="not-new-tab-for-link">
                Europe
            </a>
        </li>
    </ul>
</div>
    </div>

    </div>
</nav>

<div id="search-overlay">
  <a href="#" id="close-search-overlay"><svg width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg"><title>close</title><path d="M1.608 0L0 1.61l7.498 7.505L0 16.62l1.608 1.61 7.498-7.505 7.498 7.505 1.608-1.61-7.498-7.505 7.499-7.505L16.604 0 9.106 7.507z" fill="#616668" fill-rule="evenodd"/></svg></a>

  <div class="container">

    <form>
      <div class="form-group">
        <input type="text" id="search" placeholder="Search..." width="100%", autocomplete="off" >
      </div>
    </form>

    <div id="result-count"></div>

    <div class="list-group">
      <div class="row">
        <div class="col-md-6 col-md-offset-3">
          <ul class="search-results"></ul>
        </div>
      </div>
    </div>

  </div>
</div>



    <div class="container">

      <a id="edit-on-github" href="https://github.com/bambora/dev.na.bambora.com/edit/staging/source/slate/docs/references/recurring_payment/index.md">
  Edit this page
</a>


<!-- Modal apears on link click -->
<div class="modal-overlay">
  <div class="modal github-modal" role="dialog">
      <h3 class="js-toc-ignore">Edit on Github</h3>

      <p> 
      To propose changes to the Developer Portal click the link below and follow these steps: 
      </p>

      <ol>
        <li>Sign in to Github. You will have to create an account if you don't already have one.</li>
        <li>Click the <strong>Fork this repository and propose changes </strong>button.</li>
        <li>Make your proposed changes to the file. Content is formatted with <a href="http://commonmark.org/help/">Markdown.</a></li>
        <li>At the bottom of the page, optionally add a title and description to your changes, and click the <strong>Propose file change button</strong>.</li>
        <li>On the next page, click <strong>Create pull request</strong>, and then click it again.</li>
        <li>You're done! Someone will review your changes and they will appear on the site shortly.</li>
      </ol>

      <div class="btn-row">
          <a href="#" class="btn continue-to-github" target="_blank">Continue to Github</a>
          <button class="btn btn-secondary close-modal">Cancel</button>
      </div>
  </div>
</div>      
          <div class='breadcrumb-trail'><span><a href='/slate/'>Slate</a></span><span class='chevron'> / </span><span><a href='/slate/docs/'>Docs</a></span><span class='chevron'> / </span><span><a href='/slate/docs/references/'>References</a></span><span class='chevron'> / </span><span class='this-page'>Recurring Payment</span></div>
 
      


<div class="nav-wrapper">
<nav class="nav-left nav-sticky nav-vertical">

  <div class="mobile-close"><svg width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg"><title>close</title><path d="M1.608 0L0 1.61l7.498 7.505L0 16.62l1.608 1.61 7.498-7.505 7.498 7.505 1.608-1.61-7.498-7.505 7.499-7.505L16.604 0 9.106 7.507z" fill="#616668" fill-rule="evenodd"/></svg></div>


      <ul>

          <li data-nav-title="/slate/docs/guides/recurring_payment/" class="">
            <a href="/slate/docs/guides/recurring_payment/" class="nav-top-heading">
              Guide 
            </a>

          </li>

          <li data-nav-title="/slate/docs/references/recurring_payment/" class="active">
            <a href="/slate/docs/references/recurring_payment/" class="nav-top-heading">
              Create 
            </a>

              <div class="page-included js-toc"></div>
          </li>

          <li data-nav-title="/slate/docs/references/recurring_payment/modify/" class="">
            <a href="/slate/docs/references/recurring_payment/modify/" class="nav-top-heading">
              Modify 
            </a>

          </li>
      </ul>
</nav>
</div>

<!-- button to click on small screen to show toc -->
<div class="show-toc">
  Contents
</div>





      <div class="row">
          <div class="col-md-9 col-md-offset-3 js-toc-content">

          <div class="markdown">
            <h1 id="create-a-recurring-payment">Create a recurring payment</h1>

<h2 id="request-parameters">Request parameters</h2>

<p><strong>URL:</strong> https://api.na.bambora.com/scripts/process_transaction.asp </br>
<strong>Method:</strong> POST</p>

<h3 id="authorization">Authorization</h3>
<div class='table-wrap'><table class='table'><thead><tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody><tr>
<td>requestType</td>
<td>BACKEND</td>
<td>Always pass &quot;BACKEND&quot; (case sensitive).</td>
</tr>
<tr>
<td>merchant_id</td>
<td>9 digits</td>
<td>Unique identifier for your Bambora merchant account (not &quot;merchantId&quot;).</td>
</tr>
<tr>
<td>passcode</td>
<td>32 digits</td>
<td>Payment API Passcode (not the Recurring Payment API passcode)</td>
</tr>
</tbody></table></div>
<h3 id="schedule">Schedule</h3>
<div class='table-wrap'><table class='table'><thead><tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody><tr>
<td>trnRecurring</td>
<td>Binary digit.</td>
<td>Always pass &quot;1&quot; to flag as a recurring transaction.</td>
</tr>
<tr>
<td>rbBillingPeriod</td>
<td>D, W, M, Y</td>
<td>Use with rbBillingIncrement to set billing frequency. Values: D – Days, W – Weeks, M – Months, Y – Years</td>
</tr>
<tr>
<td>rbBillingIncrement</td>
<td>Numeric.</td>
<td>Use with rbBillingPeriod to specify the billing frequency. For example, if rbBillingPeriod=W and rbBillingIncrement=2, the card is charged every two weeks.</td>
</tr>
<tr>
<td>rbEndMonth</td>
<td>1 or 0</td>
<td>Set to 1 to charge the card on the last day of the month (rbBillingPeriod must be M).</td>
</tr>
<tr>
<td>rbCharge</td>
<td>1 or 0</td>
<td>Set to &quot;0&quot; to delay the first charge until the rbFirstBilling date. Defaults to &quot;1&quot; meaning the card is charged the trnAmount immediately.</td>
</tr>
<tr>
<td>rbFirstBilling</td>
<td>MMDDYYYY</td>
<td>The date for the first payment. Defaults to the current date if no value is passed. rbCharge must be also be set.</td>
</tr>
<tr>
<td>rbSecondBilling</td>
<td>MMDDYYYY</td>
<td>The start date of the regular billing schedule. If different to rbFirstBilling, the first payment will be prorated.</td>
</tr>
<tr>
<td>rbExpiry</td>
<td>MMDDYYYY</td>
<td>The date the recurring billing account expires. If no value is passed the payment will continue indefinitely.</td>
</tr>
</tbody></table></div>
<h3 id="transaction">Transaction</h3>
<div class='table-wrap'><table class='table'><thead><tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody><tr>
<td>trnType</td>
<td></td>
<td>Always pass &quot;P&quot; for payment.</td>
</tr>
<tr>
<td>trnAmount</td>
<td>0.00</td>
<td>Total transaction amount value. Should include taxes and any other charges. Max 9 digits and max 2 decimal places</td>
</tr>
</tbody></table></div>
<h3 id="card-info">Card info</h3>
<div class='table-wrap'><table class='table'><thead><tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody><tr>
<td>singleUseToken</td>
<td>32 chars</td>
<td></td>
</tr>
<tr>
<td>customerCode</td>
<td>Max. 64 alphanumeric characters</td>
<td></td>
</tr>
<tr>
<td>trnCardOwner</td>
<td>Max. 64 chars</td>
<td>Full name of the card holder exactly as on the credit card.</td>
</tr>
<tr>
<td>trnCardNumber</td>
<td>Max. 20 digits</td>
<td>Customer’s credit card number.</td>
</tr>
<tr>
<td>trnExpMonth</td>
<td>2 digits</td>
<td>Card expiry month e.g. March = 03</td>
</tr>
<tr>
<td>trnExpYear</td>
<td>2 digits</td>
<td>Card expiry years must be entered as a number less than 50 (2019=19). trnExpYear and trnExpMonth must be a date in the future.</td>
</tr>
<tr>
<td>trnCardCvd</td>
<td>4 digits Amex, 3 digits all other cards</td>
<td>Include the 3 or 4-digit CVD number from the back of the customer&#39;s credit card. CVD numbers are not stored in the Bambora system and will only be used for a first recurring billing transaction if passed.</td>
</tr>
</tbody></table></div>
<h3 id="billing-address">Billing address</h3>
<div class='table-wrap'><table class='table'><thead><tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody><tr>
<td>ordName</td>
<td>Max. 64 alphanumeric characters</td>
<td>Capture the first and last name of the customer placing the order. May be different from trnCardOwner.</td>
</tr>
<tr>
<td>ordEmailAddress</td>
<td>Max. 64 alphanumeric characters. Format a@b.com</td>
<td>Email address for sending automated email receipts.</td>
</tr>
<tr>
<td>ordPhoneNumber</td>
<td>Max. 32 alphanumeric characters</td>
<td>Collect a customer phone number for follow-up.</td>
</tr>
<tr>
<td>ordAddress1</td>
<td>Max. 64 alphanumeric characters</td>
<td>Collect a unique street address for billing.</td>
</tr>
<tr>
<td>ordAddress2</td>
<td>Max. 64 alphanumeric characters</td>
<td>Optional variable for longer addresses.</td>
</tr>
<tr>
<td>ordCity</td>
<td>Max. 32 alphanumeric characters</td>
<td>Customer&#39;s billing city.</td>
</tr>
<tr>
<td>ordProvince</td>
<td>2 characters</td>
<td>Must match a valid Province or State code.</td>
</tr>
<tr>
<td>ordPostalCode</td>
<td>16 alphanumeric characters</td>
<td>Customer’s postal code for billing.</td>
</tr>
<tr>
<td>ordCountry</td>
<td>2 characters</td>
<td>Must match a valid ISO Country Code</td>
</tr>
</tbody></table></div>
<h3 id="schedule">Schedule</h3>
<div class='table-wrap'><table class='table'><thead><tr>
<th>Account setup option</th>
<th>Required variables</th>
</tr>
</thead><tbody><tr>
<td>Basic account, billing immediately</td>
<td>trnRecurring, rbBillingPeriod, rbBillingIncrement</td>
</tr>
<tr>
<td>Bill on the last day of month</td>
<td>rbEndMonth, rbBillingPeriod—must be M for monthly</td>
</tr>
<tr>
<td>Delay first payment</td>
<td>rbCharge, rbFirstBilling</td>
</tr>
<tr>
<td>Prorate a first payment</td>
<td>rbFirstBilling, rbSecondBilling</td>
</tr>
<tr>
<td>Set an expiry date</td>
<td>rbExpiry=(date), rbNeverExpires=0</td>
</tr>
</tbody></table></div>
<h2 id="response-parameters">Response parameters</h2>

<p>Transaction information is returned as key/value pairs of the query string passed in the URL of a GET request.</p>
<div class='table-wrap'><table class='table'><thead><tr>
<th>Variable</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody><tr>
<td>rbAccountId</td>
<td></td>
<td></td>
</tr>
<tr>
<td>trnApproved</td>
<td>Binary digit</td>
<td>1 - transaction is approved, 0 - transaction is declined.</td>
</tr>
<tr>
<td>trnId</td>
<td>8 digits</td>
<td>The unique identifier the transaction.</td>
</tr>
<tr>
<td>authCode</td>
<td>Up to 32 alphanumeric characters</td>
<td>The unique identifier from the bank for approved transaction.</td>
</tr>
<tr>
<td>messageID</td>
<td>Up to 3 digits</td>
<td>The response code from the bank. See table.</td>
</tr>
<tr>
<td>messageText</td>
<td>Characters</td>
<td>Description of the messageID.</td>
</tr>
<tr>
<td>responseType</td>
<td>Single character</td>
<td>Always &quot;T&quot; as a completed transaction response.</td>
</tr>
<tr>
<td>trnAmount</td>
<td>Up to 9 digits</td>
<td>The amount of the transaction.</td>
</tr>
<tr>
<td>trnDate</td>
<td>20 alphanumeric</td>
<td>The date and time the transaction was processed.</td>
</tr>
<tr>
<td>trnOrderNumber</td>
<td>Up to 30 alphanumeric characters</td>
<td>The order number. Defaults to the trnId value.</td>
</tr>
<tr>
<td>trnLanguage</td>
<td>3 alpha chars</td>
<td><strong>eng</strong> - English, <strong>fre</strong> - French.</td>
</tr>
<tr>
<td>trnCustomerName</td>
<td>-</td>
<td>Always blank for Checkout transactions.</td>
</tr>
<tr>
<td>trnEmailAddress</td>
<td>-</td>
<td>Always blank for Checkout transactions.</td>
</tr>
<tr>
<td>trnPhoneNumber</td>
<td>-</td>
<td>Always blank for Checkout transactions</td>
</tr>
<tr>
<td>cvdID</td>
<td>Single digit</td>
<td>See table.</td>
</tr>
<tr>
<td>cardType</td>
<td>2 alpha chars</td>
<td>See table.</td>
</tr>
<tr>
<td>trnType</td>
<td>Up to 3 alphanumeric characters</td>
<td>Always &quot;P&quot; as a completed purchase.</td>
</tr>
<tr>
<td>paymentMethod</td>
<td>2 character alphanumeric</td>
<td>CC - credit card</td>
</tr>
<tr>
<td>ref1</td>
<td>Up to 256 alphanumeric characters</td>
<td>Custom order reference.</td>
</tr>
<tr>
<td>ref2</td>
<td>Up to 256 alphanumeric characters</td>
<td>Custom order reference.</td>
</tr>
<tr>
<td>ref3</td>
<td>Up to 256 alphanumeric characters</td>
<td>Custom order reference.</td>
</tr>
<tr>
<td>ref4</td>
<td>Up to 256 alphanumeric characters</td>
<td>Custom order reference.</td>
</tr>
<tr>
<td>ref5</td>
<td>Up to 256 alphanumeric characters</td>
<td>Custom order reference.</td>
</tr>
</tbody></table></div>
<h3 id="avs">AVS</h3>
<div class='table-wrap'><table class='table'><thead><tr>
<th>Variable</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody><tr>
<td>avsProcessed</td>
<td>Binary digit</td>
<td>1 is a successful attempt, 0 is no attempt to perform AVS.</td>
</tr>
<tr>
<td>avsID</td>
<td>Single digit</td>
<td>ID number from an AVS response. See table.</td>
</tr>
<tr>
<td>avsResult</td>
<td>Binary digit</td>
<td>Both address and postal/ZIP code match. 1 is a match, 0 is a mismatch.</td>
</tr>
<tr>
<td>avsAddrMatch</td>
<td>Binary digit</td>
<td>Street address match. 1 is a match, 0 is different.</td>
</tr>
<tr>
<td>avsPostalMatch</td>
<td>Binary digit</td>
<td>Postal/ZIP code match. 1 is a match, 0 is different.</td>
</tr>
<tr>
<td>avsMessage</td>
<td>Up to 128 alphanumeric characters</td>
<td>Description of the avsID.</td>
</tr>
</tbody></table></div> 
          
          </div>
        </div>
      </div>
    </div>

    <footer>



                © <a href="http://www.bambora.com/en/en/payment-solutions/" target="_blank">2017 Bambora</a>

        <div class="links">
                <a href="http://www.bambora.com/en/en/payment-solutions/customer-service/faq/terms-and-conditions/" target="_blank">Terms & Conditions</a>
        </div>
        
        <div class="pull-right">
                <a href="https://github.com/bambora/" target="_blank">Github</a>
        </div>

</footer>

    <script src="../../../../javascripts/template/tocbot_init_script-2dfca9f7.js" type="text/javascript"></script>

  </body>
</html>
