<!doctype html>
<html>
  <head>

    <link href="../../../../stylesheets/slate-7bf8663b.css" rel="stylesheet" type="text/css" />

    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W92MC5');</script>
<!-- End Google Tag Manager -->

<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon-9dabc470.png">
<link rel="icon" type="image/png" href="/images/favicon/favicon-32x32-b71a5283.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon/favicon-16x16-ea515fe9.png" sizes="16x16">
<link rel="manifest" href="/images/favicon/manifest.json">
<link rel="mask-icon" href="/images/favicon/safari-pinned-tab-fb883d2e.svg" color="#8247b5 ">
<meta name="theme-color" content="#ffffff ">

<!-- Site version (latest commit): d3d51a33dac401e70bce4e10d08b7b64d5014e29
 -->

<title>Analyze Payments</title>

<link href="../../../../stylesheets/ui.bambora.1.0.3-13e3506d.css" rel="stylesheet" type="text/css" />
<link href="../../../../stylesheets/bambora_ui_sass_overwrite-d859adf4.css" rel="stylesheet" type="text/css" />
<link href="../../../../stylesheets/portal-5e95ed43.css" rel="stylesheet" type="text/css" />
<link href="../../../../stylesheets/page/spec-4625dc8e.css" rel="stylesheet" type="text/css" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js">
</script>

<script src="../../../../javascripts/all-654c8dcb.js" type="text/javascript"></script>


      <script>
        $(function() {
          setupLanguages(["shell","python","csharp","java","ruby","php","javascript","go"]);
        });
      </script>
  </head>

  <body class="docs docs_references docs_references_payment_SDKs docs_references_payment_SDKs_analyze_payments docs_references_payment_SDKs_analyze_payments_index">

    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-W92MC5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <div class="fixed-header">
    

<nav class="nav-pane nav-fixed">

    <!-- Hamburger icon --> 
    <a href="#" class="hamburger-icon"><svg width="19" height="14" viewBox="0 0 19 14" xmlns="http://www.w3.org/2000/svg"><title>list</title><path d="M7.968 2.28h10.245V0H7.968v2.28zM0 7.975h18.213v-2.28H0v2.28zm0 5.696h10.245v-2.278H0v2.278z" fill="#84898A" fill-rule="evenodd"/></svg></a>

    <!-- Logo -->
    <div class="pull-left nav-links">
        <a href="/slate/docs/" class="logo">
                <img src="../../../../images/svg/zebraffe-dark-dev-05ffe493.svg" />
        </a>
    </div>

    <div class="header-contents">

    <!-- Links --> 
    <div class="pull-left nav-links">
                <a href="/slate/docs/guides/">Guides</a>
                <a href="/slate/docs/references/">API</a>
                <a href="/slate/docs/support/">PSP Service Reference</a>
    </div>

    <!-- Search / buttons -->
    <div class="pull-right">
        
        <span class="button-wrap">
            <a id="search-button" href="#"><svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><title>search</title><path d="M5 0a5 5 0 1 0 3.164 8.87l5.13 5.13.706-.707-5.13-5.129A5 5 0 0 0 5 0m0 1c2.206 0 4 1.794 4 4 0 .934-.313 1.809-.904 2.53l-.254.312-.312.254A3.952 3.952 0 0 1 5 9C2.794 9 1 7.206 1 5s1.794-4 4-4" fill="#454545" fill-rule="evenodd"/></svg></a>
        </span>

            <span class="button-wrap">
                    <a href="/slate/docs/sign_up/" class="btn btn-small btn-secondary" >
                        Sign up
                    </a>
            </span>
            <span class="button-wrap">
                    <a href="https://web.na.bambora.com" class="btn btn-small" >
                        Login
                    </a>
            </span>

        <div class="dropdown-nav dropdown-open-on-hover" role="navigation" 
id="region-switcher">
    North America
    <ul role="menu">
        
        <li role="menuitem">
            <a href="https://developer.bambora.com/apac" class="not-new-tab-for-link">
                Asia-Pacific
            </a>
        </li>

        <li role="menuitem">
            <a href="https://developer.bambora.com/europe" class="not-new-tab-for-link">
                Europe
            </a>
        </li>
    </ul>
</div>
    </div>

    </div>
</nav>

<div id="search-overlay">
  <a href="#" id="close-search-overlay"><svg width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg"><title>close</title><path d="M1.608 0L0 1.61l7.498 7.505L0 16.62l1.608 1.61 7.498-7.505 7.498 7.505 1.608-1.61-7.498-7.505 7.499-7.505L16.604 0 9.106 7.507z" fill="#616668" fill-rule="evenodd"/></svg></a>

  <div class="container">

    <form>
      <div class="form-group">
        <input type="text" id="search" placeholder="Search..." width="100%", autocomplete="off" >
      </div>
    </form>

    <div id="result-count"></div>

    <div class="list-group">
      <div class="row">
        <div class="col-md-6 col-md-offset-3">
          <ul class="search-results"></ul>
        </div>
      </div>
    </div>

  </div>
</div>


    </div>
    <div class="nav-push"></div>

    


<div class="nav-wrapper">
<nav class="nav-left nav-sticky nav-vertical">

  <div class="mobile-close"><svg width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg"><title>close</title><path d="M1.608 0L0 1.61l7.498 7.505L0 16.62l1.608 1.61 7.498-7.505 7.498 7.505 1.608-1.61-7.498-7.505 7.499-7.505L16.604 0 9.106 7.507z" fill="#616668" fill-rule="evenodd"/></svg></div>

  <div class="lang-selector">
    <ul>
          <li>
            <a href="#" data-language-name="shell">
              shell
            </a>
          </li>
          <li>
            <a href="#" data-language-name="python">
              python
            </a>
          </li>
          <li>
            <a href="#" data-language-name="csharp">
              csharp
            </a>
          </li>
          <li>
            <a href="#" data-language-name="java">
              java
            </a>
          </li>
          <li>
            <a href="#" data-language-name="ruby">
              ruby
            </a>
          </li>
          <li>
            <a href="#" data-language-name="php">
              php
            </a>
          </li>
          <li>
            <a href="#" data-language-name="javascript">
              javascript
            </a>
          </li>
          <li>
            <a href="#" data-language-name="go">
              go
            </a>
          </li>
    </ul>  
  </div>

      <ul>

          <li data-nav-title="/slate/docs/references/payment_SDKs/" class="">
            <a href="/slate/docs/references/payment_SDKs/" class="nav-top-heading">
              Overview 
            </a>

          </li>

          <li data-nav-title="/slate/docs/references/payment_SDKs/collect_card_data/" class="">
            <a href="/slate/docs/references/payment_SDKs/collect_card_data/" class="nav-top-heading">
              Collect Card Data 
            </a>

          </li>

          <li data-nav-title="/slate/docs/references/payment_SDKs/take_payments/" class="">
            <a href="/slate/docs/references/payment_SDKs/take_payments/" class="nav-top-heading">
              Take Payments 
            </a>

          </li>

          <li data-nav-title="/slate/docs/references/payment_SDKs/analyze_payments/" class="">
            <a href="/slate/docs/references/payment_SDKs/analyze_payments/" class="nav-top-heading">
              Analyze Payments 
            </a>

          </li>
      </ul>
</nav>
</div>

<!-- button to click on small screen to show toc -->
<div class="show-toc">
  Contents
</div>





    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content js-toc-content markdown">

        <div id="edit-on-github" class="dropdown dropdown-open-on-hover" role="listbox">
  Edit this page

  <ul>
    <li class="dropdown-title">Base page:</li>
    <li role="option">
      <a href="https://github.com/bambora/dev.na.bambora.com/edit/staging/source/docs/references/payment_SDKs/analyze_payments.md">
        analyze_payments.md
      </a>
    </li>

    <li class="dropdown-title">Includes:</li>
      <li role="option">
        <a href="https://github.com/bambora/dev.na.bambora.com/edit/staging/source/includes/na/analyze_payments/_overview.md">
          overview.md
        </a>
      </li>
      <li role="option">
        <a href="https://github.com/bambora/dev.na.bambora.com/edit/staging/source/includes/na/analyze_payments/_code_samples.md">
          code_samples.md
        </a>
      </li>
  </ul>
</div>    

<!-- Modal apears on link click -->
<div class="modal-overlay">
  <div class="modal github-modal" role="dialog">
      <h3 class="js-toc-ignore">Edit on Github</h3>

      <p> 
      To propose changes to the Developer Portal click the link below and follow these steps: 
      </p>

      <ol>
        <li>Sign in to Github. You will have to create an account if you don't already have one.</li>
        <li>Click the <strong>Fork this repository and propose changes </strong>button.</li>
        <li>Make your proposed changes to the file. Content is formatted with <a href="http://commonmark.org/help/">Markdown.</a></li>
        <li>At the bottom of the page, optionally add a title and description to your changes, and click the <strong>Propose file change button</strong>.</li>
        <li>On the next page, click <strong>Create pull request</strong>, and then click it again.</li>
        <li>You're done! Someone will review your changes and they will appear on the site shortly.</li>
      </ol>

      <div class="btn-row">
          <a href="#" class="btn continue-to-github" target="_blank">Continue to Github</a>
          <button class="btn btn-secondary close-modal">Cancel</button>
      </div>
  </div>
</div>
            <div class='breadcrumb-trail'><span><a href='/docs/'>Docs</a></span><span class='chevron'> / </span><span><a href='/docs/references/'>References</a></span><span class='chevron'> / </span><span><a href='/docs/references/payment_SDKs/'>Payment SDKs</a></span><span class='chevron'> / </span><span class='this-page'>Analyze Payments</span></div>


          
            <h1 id="analyze-payments">Analyze Payments</h1>

<p>We give merchants and developers the power to generate numerous, flexible reports. Merchants can review complete transaction details for a particular transaction ID, or access basic summary order information using specific search and sort functions.</p>

            <h2 id="get-transactions">Get Transactions</h2>
<pre class="highlight shell"><code>Definition
GET /v1/payments HTTP/1.1

Request
curl https://api.na.bambora.com/v1/payments/<span class="o">{</span>transactionId<span class="o">}</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Passcode MzAwMjAwNTc4OjRCYUQ4MkQ5MTk3YjRjYzRiNzBhMjIxOTExZUU5Zjcw"</span> <span class="se">\</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">beanstream</span><span class="p">.</span><span class="nx">payments</span><span class="p">.</span><span class="nx">getPayment</span><span class="p">(</span><span class="nx">transactionId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">transaction</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">transaction</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<pre class="highlight php"><code>try {
    $result = $beanstream-&gt;reporting()-&gt;getTransaction($transaction_id);
} catch (\Beanstream\Exception $e) {
    //handle exception
}
</code></pre>
<pre class="highlight ruby"><code><span class="n">get_trans</span> <span class="o">=</span> <span class="no">Beanstream</span><span class="o">.</span><span class="no">PaymentsAPI</span><span class="p">.</span><span class="nf">get_transaction</span><span class="p">(</span><span class="n">transaction_id</span><span class="p">)</span>
</code></pre>
<pre class="highlight python"><code><span class="n">txn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">beanstream</span><span class="o">.</span><span class="n">get_transaction</span><span class="p">(</span><span class="n">transId</span><span class="p">)</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">txn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</code></pre>
<pre class="highlight java"><code><span class="k">try</span> <span class="o">{</span>
    <span class="n">Transaction</span> <span class="n">transaction</span> <span class="o">=</span> <span class="n">beanstream</span><span class="o">.</span><span class="na">reports</span><span class="o">().</span><span class="na">getTransaction</span><span class="o">(</span><span class="n">transactionId</span><span class="o">);</span>

<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">BeanstreamApiException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// todo handle error</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight csharp"><code><span class="n">Transaction</span> <span class="n">trans</span> <span class="p">=</span> <span class="n">beanstream</span><span class="p">.</span><span class="n">Reporting</span><span class="p">.</span><span class="nf">GetTransaction</span> <span class="p">(</span><span class="n">TransactionId</span><span class="p">);</span>
</code></pre>
<pre class="highlight go"><code><span class="n">transaction</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">gateway</span><span class="o">.</span><span class="n">Payments</span><span class="p">()</span><span class="o">.</span><span class="n">GetTransaction</span><span class="p">(</span><span class="n">transactionId</span><span class="p">)</span><span class="x">
</span></code></pre>

<p>You can retrieve a previous transaction using this method. All you need the the transaction ID.</p>

<p>You must use the correct API key for this method.</p>

<h2 id="search-by-specific-criteria">Search by Specific Criteria</h2>
<pre class="highlight shell"><code>Definition
POST /v1/reports HTTP/1.1

Request
curl https://api.na.bambora.com/v1/reports <span class="se">\</span>
-u <span class="s2">"284000000:30c9dbd6505a4c8e960451feba6f036a"</span> <span class="se">\</span>
-d <span class="s1">'{
     "name": "Search",
     "start_date": "2012-01-01T01:01:03",
     "end_date": "2014-06-05T16:05:00",   
     "start_row": "1",
     "end_row": "2",
     "criteria": [
       {
         "field": "1",
         "operator": "%3C%3D",
         "value": "10000001"
       }
     ]
   }'</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">Reports</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'beanstream/reports'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="nx">start</span><span class="p">.</span><span class="nx">setHours</span><span class="p">(</span><span class="nx">start</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span><span class="o">-</span><span class="mi">4</span><span class="o">-</span><span class="mi">8</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">end</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="nx">end</span><span class="p">.</span><span class="nx">setHours</span><span class="p">(</span><span class="nx">end</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span><span class="o">+</span><span class="mi">2</span><span class="o">-</span><span class="mi">8</span><span class="p">);</span> <span class="c1">// -8 to convert to PDT, the time the test account is in</span>

<span class="kd">var</span> <span class="nx">criteria</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="na">field</span><span class="p">:</span> <span class="nx">Reports</span><span class="p">.</span><span class="nx">FIELDS</span><span class="p">.</span><span class="nx">TransactionId</span><span class="p">,</span>
    <span class="na">operator</span><span class="p">:</span> <span class="nx">Reports</span><span class="p">.</span><span class="nx">OPERATORS</span><span class="p">.</span><span class="nx">Equals</span><span class="p">,</span>
    <span class="na">value</span><span class="p">:</span> <span class="nx">transId</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="nx">beanstream</span><span class="p">.</span><span class="nx">reports</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">start</span><span class="p">.</span><span class="nx">toISOString</span><span class="p">(),</span> <span class="nx">end</span><span class="p">.</span><span class="nx">toISOString</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">criteria</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// return results</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>
<pre class="highlight php"><code>$search_criteria = array(
     'name' =&gt; 'TransHistoryMinimal', // or 'Search',
     'start_date' =&gt; '1999-01-01T00:00:00',
     'end_date' =&gt; '2016-01-01T23:59:59',   
     'start_row' =&gt; '1',
     'end_row' =&gt; '15000',
     'criteria' =&gt; array(
         'field' =&gt; '1',
         'operator' =&gt; '%3E',
         'value' =&gt; '1000000'
     )
);
try {
    $result = $beanstream-&gt;reporting()-&gt;getTransactions($search_criteria);
} catch (\Beanstream\Exception $e) {
    //handle exception
}
</code></pre>
<pre class="highlight ruby"><code><span class="n">last3Hours</span> <span class="o">=</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span> <span class="o">-</span> <span class="mi">3</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span>
<span class="n">next3Hours</span> <span class="o">=</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span>

<span class="n">results</span> <span class="o">=</span> <span class="no">Beanstream</span><span class="o">.</span><span class="no">ReportingAPI</span><span class="p">.</span><span class="nf">search_transactions</span><span class="p">(</span>
        <span class="n">last3Hours</span><span class="p">,</span>
        <span class="n">next3Hours</span><span class="p">,</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="mi">10</span><span class="p">,</span>
        <span class="no">Criteria</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>
          <span class="no">Fields</span><span class="o">::</span><span class="no">OrderNumber</span><span class="p">,</span>
          <span class="no">Operators</span><span class="o">::</span><span class="no">EQUALS</span><span class="p">,</span>
          <span class="s2">"orderNum1"</span>
        <span class="p">)</span>
      <span class="p">)</span>
</code></pre>
<pre class="highlight python"><code><span class="n">startDate</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c">#1 hour ago</span>
<span class="n">endDate</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c">#1 hour from now</span>

<span class="n">txn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">beanstream</span><span class="o">.</span><span class="n">query_transactions</span><span class="p">()</span>
<span class="n">criteria</span> <span class="o">=</span> <span class="p">[</span><span class="n">Criteria</span><span class="p">(</span><span class="n">Fields</span><span class="o">.</span><span class="n">TransactionId</span><span class="p">,</span> <span class="n">Operator</span><span class="p">(</span><span class="s">'='</span><span class="p">),</span> <span class="n">transId</span><span class="p">)]</span>
<span class="n">txn</span><span class="o">.</span><span class="n">set_query_params</span><span class="p">(</span><span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">criteria</span><span class="p">)</span> <span class="c">#1 and 10 are the paging numbers</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">txn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</code></pre>
<pre class="highlight java"><code><span class="k">try</span> <span class="o">{</span>
    <span class="n">Calendar</span> <span class="n">cal</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
    <span class="n">cal</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DATE</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span>
    <span class="n">Date</span> <span class="n">startDate</span> <span class="o">=</span> <span class="n">cal</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span> <span class="c1">// yesterday</span>
    <span class="n">cal</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
    <span class="n">cal</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">DATE</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
    <span class="n">Date</span> <span class="n">endDate</span> <span class="o">=</span> <span class="n">cal</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span> <span class="c1">// tomorrow</span>
    <span class="n">Criteria</span><span class="o">[]</span> <span class="n">searchFilter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Criteria</span><span class="o">[]{</span>
        <span class="k">new</span> <span class="n">Criteria</span><span class="o">(</span><span class="n">QueryFields</span><span class="o">.</span><span class="na">OrderNumber</span><span class="o">,</span> <span class="n">Operators</span><span class="o">.</span><span class="na">Equals</span><span class="o">,</span> <span class="s">"myOrderNumber001"</span><span class="o">)</span>
    <span class="o">};</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">TransactionRecord</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">beanstream</span><span class="o">.</span><span class="na">reports</span><span class="o">().</span><span class="na">query</span><span class="o">(</span><span class="n">startDate</span><span class="o">,</span> <span class="n">endDate</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="n">searchFilter</span><span class="o">);</span>

<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">BeanstreamApiException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// todo handle error</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight csharp"><code><span class="n">List</span><span class="p">&lt;</span><span class="n">TransactionRecord</span><span class="p">&gt;</span> <span class="n">records</span> <span class="p">=</span> <span class="n">beanstream</span><span class="p">.</span><span class="n">Reporting</span><span class="p">.</span><span class="nf">Query</span> <span class="p">(</span>  
    <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">Subtract</span><span class="p">(</span><span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromMinutes</span><span class="p">(</span><span class="m">1</span><span class="p">)),</span>
    <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromMinutes</span><span class="p">(</span><span class="m">5</span><span class="p">)),</span>
    <span class="m">1</span><span class="p">,</span>
    <span class="m">1000</span><span class="p">,</span>
    <span class="k">new</span> <span class="n">Criteria</span><span class="p">[]{</span>
        <span class="k">new</span> <span class="nf">Criteria</span><span class="p">()</span> <span class="p">{</span>
            <span class="n">Field</span> <span class="p">=</span> <span class="n">QueryFields</span><span class="p">.</span><span class="n">TransactionId</span><span class="p">,</span>
            <span class="n">Operator</span> <span class="p">=</span> <span class="n">Operators</span><span class="p">.</span><span class="n">GreaterThanEqual</span><span class="p">,</span>
            <span class="n">Value</span> <span class="p">=</span> <span class="s">"1"</span>
        <span class="p">},</span>
        <span class="k">new</span> <span class="nf">Criteria</span><span class="p">()</span> <span class="p">{</span>
            <span class="n">Field</span> <span class="p">=</span> <span class="n">QueryFields</span><span class="p">.</span><span class="n">TransactionId</span><span class="p">,</span>
            <span class="n">Operator</span> <span class="p">=</span> <span class="n">Operators</span><span class="p">.</span><span class="n">LessThanEqual</span><span class="p">,</span>
            <span class="n">Value</span> <span class="p">=</span> <span class="s">"99999999"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre>
<pre class="highlight go"><code><span class="n">startTime</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">AddDate</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x"> </span><span class="o">-</span><span class="m">1</span><span class="p">)</span><span class="x">
</span><span class="n">endTime</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">AddDate</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x"> </span><span class="m">1</span><span class="p">)</span><span class="x">

</span><span class="n">criteria1</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">beanstream</span><span class="o">.</span><span class="n">Criteria</span><span class="p">{</span><span class="x">
    </span><span class="n">fields</span><span class="o">.</span><span class="n">Amount</span><span class="p">,</span><span class="x">
    </span><span class="n">operators</span><span class="o">.</span><span class="n">GreaterThanEqual</span><span class="p">,</span><span class="x">
    </span><span class="s">"200.00"</span><span class="p">}</span><span class="x">
</span><span class="n">res</span><span class="p">,</span><span class="x"> </span><span class="n">err3</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">gateway</span><span class="o">.</span><span class="n">Reports</span><span class="p">()</span><span class="o">.</span><span class="n">Query</span><span class="p">(</span><span class="n">startTime</span><span class="p">,</span><span class="x"> </span><span class="n">endTime</span><span class="p">,</span><span class="x"> </span><span class="m">1</span><span class="p">,</span><span class="x"> </span><span class="m">10</span><span class="p">,</span><span class="x"> </span><span class="n">criteria1</span><span class="p">)</span><span class="x">
</span></code></pre>

<p>With the Reporting API you can access basic summary order information using simple search functions.</p>

<p>Each search can be performed using a date range and an optional number of search criteria, to narrow down the search.</p>

<p>Note: Make sure you are using the Reporting API key gathered from the member area in your account.</p>

<h3 id="parameters">Parameters</h3>

<p>There are several parameters that are required to perform a search:</p>

<ul>
<li><strong>Date Range:</strong> The start and end dates that you want to search between.</li>
<li><strong>Paging rows:</strong> If you are searching for possibly a lot of records, these parameters let you page the results. The starting row value must be 1 or greater. If you are just looking to retrieve one row, set the start row to 1 and the end row to 2.</li>
<li><strong>Criteria:</strong> (Optional) You can narrow down your search by using specific search criteria</li>
</ul>

<h4 id="search-criteria">Search Criteria</h4>

<p>The search criteria require 3 parameters: field, operator, and value. You can supply as many criteria as you wish and each Criteria will be ANDed together eg. CriteriaA AND CriteriaB AND CriteriaC</p>

<h5 id="1-field">1. Field</h5>

<p>The criteria operate on over 20 different fields of a transaction record. Each field is specified by a numeric value, in order starting from 1. The SDKs will handle this mapping for you, but if you are using REST directly then you will want to take note of this table:</p>
<div class='table-wrap'><table class='table'><thead><tr>
<th>Index</th>
<th>Field Name</th>
</tr>
</thead><tbody><tr>
<td>1</td>
<td>TransactionId</td>
</tr>
<tr>
<td>2</td>
<td>Amount</td>
</tr>
<tr>
<td>3</td>
<td>MaskedCardNumber</td>
</tr>
<tr>
<td>4</td>
<td>CardOwner</td>
</tr>
<tr>
<td>5</td>
<td>OrderNumber</td>
</tr>
<tr>
<td>6</td>
<td>IPAddress</td>
</tr>
<tr>
<td>7</td>
<td>AuthorizationCode</td>
</tr>
<tr>
<td>8</td>
<td>TransType</td>
</tr>
<tr>
<td>9</td>
<td>CardType</td>
</tr>
<tr>
<td>10</td>
<td>Response</td>
</tr>
<tr>
<td>11</td>
<td>BillingName</td>
</tr>
<tr>
<td>12</td>
<td>BillingEmail</td>
</tr>
<tr>
<td>13</td>
<td>BillingPhone</td>
</tr>
<tr>
<td>14</td>
<td>ProcessedBy</td>
</tr>
<tr>
<td>15</td>
<td>Ref1</td>
</tr>
<tr>
<td>16</td>
<td>Ref2</td>
</tr>
<tr>
<td>17</td>
<td>Ref3</td>
</tr>
<tr>
<td>18</td>
<td>Ref4</td>
</tr>
<tr>
<td>19</td>
<td>Ref5</td>
</tr>
<tr>
<td>20</td>
<td>ProductName</td>
</tr>
<tr>
<td>21</td>
<td>ProductID</td>
</tr>
<tr>
<td>22</td>
<td>CustCode</td>
</tr>
<tr>
<td>23</td>
<td>IDAdjustmentTo</td>
</tr>
<tr>
<td>24</td>
<td>IDAdjustedBy</td>
</tr>
</tbody></table></div>
<h5 id="2-operator">2. Operator</h5>

<p>There are 6 operators available. They must be encoded:</p>
<div class='table-wrap'><table class='table'><thead><tr>
<th>Operator</th>
<th>Encoded</th>
</tr>
</thead><tbody><tr>
<td>=</td>
<td>%3D</td>
</tr>
<tr>
<td>&lt;</td>
<td>%3C</td>
</tr>
<tr>
<td>&gt;</td>
<td>%3E</td>
</tr>
<tr>
<td>&lt;=</td>
<td>%3C%3D</td>
</tr>
<tr>
<td>&gt;=</td>
<td>%3E%3D</td>
</tr>
<tr>
<td>Start With</td>
<td>START%20WITH</td>
</tr>
</tbody></table></div>
<h5 id="3-value">3. Value</h5>

<p>This is the value you want to match against.</p>

<h2 id="analyze-payment-errors">Analyze Payment Errors</h2>

<p>You can read the errors returned by the API <a href="/docs/references/payment_APIs">here</a>.</p>

      </div>
      
      <div class="dark-box">

          <div class="tabs lang-selector">
                <a href="#" data-language-name="shell"> 
                  shell
                </a>
                <a href="#" data-language-name="python"> 
                  python
                </a>
                <a href="#" data-language-name="csharp"> 
                  csharp
                </a>
                <a href="#" data-language-name="java"> 
                  java
                </a>
                <a href="#" data-language-name="ruby"> 
                  ruby
                </a>
                <a href="#" data-language-name="php"> 
                  php
                </a>
                <a href="#" data-language-name="javascript"> 
                  javascript
                </a>
                <a href="#" data-language-name="go"> 
                  go
                </a>
          </div>
        
      </div>
    </div>

    <footer>



                © <a href="http://www.bambora.com/en/en/payment-solutions/" target="_blank">2017 Bambora</a>

        <div class="links">
                <a href="http://www.bambora.com/en/en/payment-solutions/customer-service/faq/terms-and-conditions/" target="_blank">Terms & Conditions</a>
        </div>
        
        <div class="pull-right">
                <a href="https://github.com/bambora/" target="_blank">Github</a>
        </div>

</footer>
    <script src="../../../../javascripts/template/tocbot_init_script-2dfca9f7.js" type="text/javascript"></script>

    <script>
      // spec template has different headingsOffset for tocbot
      tocbot.init({
        tocSelector: '.js-toc',
        contentSelector: '.js-toc-content',
        headingSelector: 'h2, h3, h4, h5',
        ignoreSelector: '.js-toc-ignore',
        collapseDepth: 1,
        headingsOffset: 80,
        smoothScrollOptions: {
          offset: 100
        }
      });
    </script>

  </body>
</html>
