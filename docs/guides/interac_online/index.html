<!doctype html>
<html>
  <head>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W92MC5');</script>
<!-- End Google Tag Manager -->

<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon-9dabc470.png">
<link rel="icon" type="image/png" href="/images/favicon/favicon-32x32-b71a5283.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon/favicon-16x16-ea515fe9.png" sizes="16x16">
<link rel="manifest" href="/images/favicon/manifest.json">
<link rel="mask-icon" href="/images/favicon/safari-pinned-tab-fb883d2e.svg" color="#8247b5 ">
<meta name="theme-color" content="#ffffff ">

<!-- Site version (latest commit): 4b6e0c8c64381e0649dcf61b0319f323f9003fa0
 -->

<title>Interac Online</title>

<link href="../../../stylesheets/ui.bambora.1.0.3-13e3506d.css" rel="stylesheet" type="text/css" />
<link href="../../../stylesheets/bambora_ui_sass_overwrite-d859adf4.css" rel="stylesheet" type="text/css" />
<link href="../../../stylesheets/portal-5e95ed43.css" rel="stylesheet" type="text/css" />
<link href="../../../stylesheets/page/tutorial-c59b694d.css" rel="stylesheet" type="text/css" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js">
</script>

<script src="../../../javascripts/all-654c8dcb.js" type="text/javascript"></script>

  </head>

  <body class="docs docs_guides docs_guides_interac_online docs_guides_interac_online_index">

    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-W92MC5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    

<nav class="nav-pane nav-fixed">

    <!-- Hamburger icon --> 
    <a href="#" class="hamburger-icon"><svg width="19" height="14" viewBox="0 0 19 14" xmlns="http://www.w3.org/2000/svg"><title>list</title><path d="M7.968 2.28h10.245V0H7.968v2.28zM0 7.975h18.213v-2.28H0v2.28zm0 5.696h10.245v-2.278H0v2.278z" fill="#84898A" fill-rule="evenodd"/></svg></a>

    <!-- Logo -->
    <div class="pull-left nav-links">
        <a href="/docs/" class="logo">
                <img src="../../../images/svg/zebraffe-dark-dev-05ffe493.svg" />
        </a>
    </div>

    <div class="header-contents">

    <!-- Links --> 
    <div class="pull-left nav-links">
                <a href="/docs/guides/" class="active">Guides</a>
                <a href="/docs/references/">References</a>
                <a href="/docs/support/">Support</a>
    </div>

    <!-- Search / buttons -->
    <div class="pull-right">
        
        <span class="button-wrap">
            <a id="search-button" href="#"><svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><title>search</title><path d="M5 0a5 5 0 1 0 3.164 8.87l5.13 5.13.706-.707-5.13-5.129A5 5 0 0 0 5 0m0 1c2.206 0 4 1.794 4 4 0 .934-.313 1.809-.904 2.53l-.254.312-.312.254A3.952 3.952 0 0 1 5 9C2.794 9 1 7.206 1 5s1.794-4 4-4" fill="#454545" fill-rule="evenodd"/></svg></a>
        </span>

            <span class="button-wrap">
                    <a href="/docs/sign_up/" class="btn btn-small btn-secondary" >
                        Sign up
                    </a>
            </span>
            <span class="button-wrap">
                    <a href="https://web.na.bambora.com" class="btn btn-small" >
                        Login
                    </a>
            </span>

        <div class="dropdown-nav dropdown-open-on-hover" role="navigation" 
id="region-switcher">
    North America
    <ul role="menu">
        
        <li role="menuitem">
            <a href="https://developer.bambora.com/apac" class="not-new-tab-for-link">
                Asia-Pacific
            </a>
        </li>

        <li role="menuitem">
            <a href="https://developer.bambora.com/europe" class="not-new-tab-for-link">
                Europe
            </a>
        </li>
    </ul>
</div>
    </div>

    </div>
</nav>

<div id="search-overlay">
  <a href="#" id="close-search-overlay"><svg width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg"><title>close</title><path d="M1.608 0L0 1.61l7.498 7.505L0 16.62l1.608 1.61 7.498-7.505 7.498 7.505 1.608-1.61-7.498-7.505 7.499-7.505L16.604 0 9.106 7.507z" fill="#616668" fill-rule="evenodd"/></svg></a>

  <div class="container">

    <form>
      <div class="form-group">
        <input type="text" id="search" placeholder="Search..." width="100%", autocomplete="off" >
      </div>
    </form>

    <div id="result-count"></div>

    <div class="list-group">
      <div class="row">
        <div class="col-md-6 col-md-offset-3">
          <ul class="search-results"></ul>
        </div>
      </div>
    </div>

  </div>
</div>



    <div class="container">

      <a id="edit-on-github" href="https://github.com/bambora/dev.na.bambora.com/edit/staging/source/docs/guides/interac_online.md">
  Edit this page
</a>


<!-- Modal apears on link click -->
<div class="modal-overlay">
  <div class="modal github-modal" role="dialog">
      <h3 class="js-toc-ignore">Edit on Github</h3>

      <p> 
      To propose changes to the Developer Portal click the link below and follow these steps: 
      </p>

      <ol>
        <li>Sign in to Github. You will have to create an account if you don't already have one.</li>
        <li>Click the <strong>Fork this repository and propose changes </strong>button.</li>
        <li>Make your proposed changes to the file. Content is formatted with <a href="http://commonmark.org/help/">Markdown.</a></li>
        <li>At the bottom of the page, optionally add a title and description to your changes, and click the <strong>Propose file change button</strong>.</li>
        <li>On the next page, click <strong>Create pull request</strong>, and then click it again.</li>
        <li>You're done! Someone will review your changes and they will appear on the site shortly.</li>
      </ol>

      <div class="btn-row">
          <a href="#" class="btn continue-to-github" target="_blank">Continue to Github</a>
          <button class="btn btn-secondary close-modal">Cancel</button>
      </div>
  </div>
</div>      
          <div class='breadcrumb-trail'><span><a href='/docs/'>Docs</a></span><span class='chevron'> / </span><span><a href='/docs/guides/'>Guides</a></span><span class='chevron'> / </span><span class='this-page'>Interac Online</span></div>
 
      
    


<div class="nav-wrapper">
<nav class="nav-left nav-sticky nav-vertical">

  <div class="mobile-close"><svg width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg"><title>close</title><path d="M1.608 0L0 1.61l7.498 7.505L0 16.62l1.608 1.61 7.498-7.505 7.498 7.505 1.608-1.61-7.498-7.505 7.499-7.505L16.604 0 9.106 7.507z" fill="#616668" fill-rule="evenodd"/></svg></div>


      <div class="page-only js-toc"></div> 
</nav>
</div>

<!-- button to click on small screen to show toc -->
<div class="show-toc">
  Contents
</div>





      <div class="row">
          <div class="col-md-9 col-md-offset-3 js-toc-content">

          <div class="markdown">
            <h2 id="interac-online">Interac Online</h2>

<p>Interac Online is a transaction method available to Canadian merchants only. It allows customers to authenticate direct debits without sharing their debit card details with the merchant. An Interac payment flow is similar to the <a href="/docs/guides/3D_secure/">3D Secure</a> payment flow. It has three steps:</p>

<ol>
<li>Submit an initial Interac payment request to us. You will receive an Interac response with redirect code.</li>
<li>Redirect the customer to the bank portal using redirect code received from initial request. The customer logs in to approve the payment and the bank redirects the customer back to your site with success/failure information.</li>
<li>Submit final payment request to us.</li>
</ol>

<p>In addition to this guide feel free to check out our <a href="https://github.com/bambora/na-payment-apis-demo">Payment APIs Demo implementation</a> on GitHub.</p>

<h4 id="apis">APIs</h4>

<ul>
<li>Initial request: POST <code class="prettyprint">https://api.na.bambora.com/v1/payments</code></li>
<li>Final request: POST <code class="prettyprint">https://api.na.bambora.com/v1/payments/{id}/continue</code></li>
</ul>

<h3 id="step-1-submit-initial-request">Step 1: Submit initial request</h3>

<p>Send a request to our Payments API to initiate the Interac process. The response from this request will provide you with the redirect HTML code that you render to the customer in order to redirect them to the banking portal.</p>
<pre class="highlight shell"><code>POST /v1/payments

curl https://api.na.bambora.com/v1/payments
-H <span class="s2">"Authorization: Passcode MzAwMjAwNTc4OjRCYU..."</span>
-H <span class="s2">"Content-Type: application/json"</span>
-d <span class="s1">'{
      "order_number":"MyOrderId-01234",
      "amount":100.00,
      "payment_method":"interac"     
    }'</span>
</code></pre>

<h4 id="response">Response</h4>
<pre class="highlight javascript"><code><span class="c1">// Response object (JSON)</span>
<span class="p">{</span>
  <span class="nx">merchant_data</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">32</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">contents</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">links</span> <span class="p">(</span><span class="nx">JSON</span><span class="p">)</span><span class="err">:</span>
<span class="p">}</span>
</code></pre>

<p>Before returning the response to your users HTML client, you will need to save the <code class="prettyprint">merchant_data</code> string in the users session. This value can be used as the <code class="prettyprint">{id}</code> value when creating your &#39;continue&#39; endpoint URL for the final request in step 3.</p>

<p>The response will have HTML in the <code class="prettyprint">contents</code>. This should be embedded in the user&#39;s browser client and this needs to be displayed to the customer to redirect them to the Interac login page. Here the customer will log onto their bank account and approve the payment. An approved or declined payment will forward the customer back to the Funded or Non-funded URLs (respectively) on your website.</p>
<pre class="highlight html"><code><span class="c">&lt;!-- Sample URL Decoded Response --&gt;</span>

<span class="nt">&lt;HTML&gt;</span>
<span class="nt">&lt;HEAD&gt;&lt;/HEAD&gt;</span>
<span class="nt">&lt;BODY&gt;</span>
<span class="nt">&lt;FORM</span> <span class="na">action=</span><span class="s">"https://iOnlinegateway.asp"</span> <span class="na">method=</span><span class="s">POST</span> <span class="na">id=</span><span class="s">frmIOnline</span> <span class="na">name=</span><span class="s">frmIOnline</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"IDEBIT_MERCHNUM"</span> <span class="na">value=</span><span class="s">"12345678911"</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"IDEBIT_AMOUNT"</span> <span class="na">value=</span><span class="s">"10000"</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"IDEBIT_TERMID"</span> <span class="na">value=</span><span class="s">"12345678"</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"IDEBIT_CURRENCY"</span> <span class="na">value=</span><span class="s">"CAD"</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"IDEBIT_INVOICE"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"IDEBIT_MERCHDATA"</span> <span class="na">value=</span><span class="s">"2F86D946-5531-4495-9D82D7E6D83BA93"</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"IDEBIT_FUNDEDURL"</span> <span class="na">value=</span><span class="s">"http://www.myCompany.asp?funded=1"</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"IDEBIT_NOTFUNDEDURL"</span> <span class="na">value=</span><span class="s">"http.www.myCompany.asp?funded=0"</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"merchant_name"</span> <span class="na">value=</span><span class="s">"Test Company"</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"referHost"</span> <span class="na">value=</span><span class="s">"http://www.myCompany.asp"</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"referHost2"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"referHost3"</span> <span class="na">value=</span><span class="s">"www.myCompany.asp"</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"IDEBIT_MERCHLANG"</span> <span class="na">value=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"IDEBIT_VERSION"</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/FORM&gt;</span>
<span class="nt">&lt;SCRIPT</span> <span class="na">language=</span><span class="s">"JavaScript"</span><span class="nt">&gt;</span>document.frmIOnline.submit();<span class="nt">&lt;/SCRIPT&gt;</span>
<span class="nt">&lt;/BODY&gt;</span>
<span class="nt">&lt;/HTML&gt;</span>
</code></pre>

<h3 id="step-2-redirect-request">Step 2: Redirect request</h3>

<p>If the transaction is cancelled or declined at any point, the bank forwards a response to the merchant’s Non-funded URL. Otherwise, the bank response is forwarded to the merchant’s Funded URL. The Funded and Non-funded URLs are values the merchant must provide to us before account activation. These values are stored internally by us. Contact our customer support team to set these URLs.</p>

<p>When you receive a redirect back from the bank site on your Funded URL you must gather the <code class="prettyprint">idebit_</code> variables they pass to use in the &#39;interac_response&#39; objects properties shown for the final request in step 3.</p>
<pre class="highlight javascript"><code><span class="nx">InteracResponse</span> <span class="p">{</span>
  <span class="nx">funded</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">20</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">idebit_track2</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">256</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">idebit_isslang</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">2</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">idebit_version</span> <span class="p">(</span><span class="nx">number</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">1</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">idebit_issconf</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">32</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">idebit_issname</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">32</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">idebit_amount</span> <span class="p">(</span><span class="nx">number</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">9</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">idebit_invoice</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">20</span><span class="p">)</span><span class="err">:</span>
<span class="p">}</span>
</code></pre>

<h3 id="step-3-submit-final-request">Step 3: Submit final request</h3>

<p>The final step is to submit a request to our continue endpoint to complete the transaction. The <code class="prettyprint">{id}</code> in the URL should be the <code class="prettyprint">merchant_data</code> from the first response (Step 2).</p>

<p>Note: The <code class="prettyprint">idebit_amount</code> is in cents.</p>
<pre class="highlight shell"><code>POST /v1/payments/<span class="o">{</span>id<span class="o">}</span>/continue
Content-Type: application/json

curl https://api.na.bambora.com/v1/payments/<span class="o">{</span>id<span class="o">}</span>/continue
-H <span class="s2">"Authorization: Passcode MzAwMjAwNTc4OjRCYU..."</span>
-H <span class="s2">"Content-Type: application/json"</span>
-d <span class="s1">'{
      "payment_method": "interac",
      "interac_response": {
        "idebit_track2": "&lt;string, max length 256)" ,
        "idebit_isslang": "&lt;string, max length 2)" ,
        "idebit_version": "&lt;number, max length 1)" ,
        "idebit_issconf": "&lt;string, max length 32)" ,
        "idebit_issname": "&lt;string, max length 32)" ,
        "idebit_amount": "&lt;number, max length 9)" ,
        "idebit_invoice": "&lt;string, max length 20)"
      }
    }'</span>
</code></pre>

<h4 id="final-response">Final Response</h4>
<pre class="highlight javascript"><code><span class="nx">PaymentResponse</span> <span class="p">{</span>
  <span class="nx">payment_method</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">id</span> <span class="p">(</span><span class="nx">number</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">9</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">approved</span> <span class="p">(</span><span class="nx">number</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">1</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">message_id</span> <span class="p">(</span><span class="nx">number</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">3</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">message</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">32</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">auth_code</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">32</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">created</span> <span class="p">(</span><span class="nx">date</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">order_number</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">30</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">type</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">16</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
  <span class="nx">interac_online</span> <span class="p">(</span><span class="nx">json</span><span class="p">)</span><span class="err">:</span>
  <span class="p">{</span>
    <span class="nx">idebit_issconf</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">32</span><span class="p">)</span><span class="err">:</span> <span class="p">,</span>
    <span class="nx">idebit_issname</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">max</span> <span class="nx">length</span> <span class="mi">32</span><span class="p">)</span><span class="err">:</span> 
  <span class="p">}</span> <span class="p">,</span>
  <span class="nx">links</span> <span class="p">(</span><span class="nx">json</span><span class="p">)</span><span class="err">:</span>
<span class="p">}</span>
</code></pre>
 
          
          </div>
        </div>
      </div>
    </div>

    <footer>



                © <a href="http://www.bambora.com/en/en/payment-solutions/" target="_blank">2017 Bambora</a>

        <div class="links">
                <a href="http://www.bambora.com/en/en/payment-solutions/customer-service/faq/terms-and-conditions/" target="_blank">Terms & Conditions</a>
        </div>
        
        <div class="pull-right">
                <a href="https://github.com/bambora/" target="_blank">Github</a>
        </div>

</footer>

    <script src="../../../javascripts/template/tocbot_init_script-2dfca9f7.js" type="text/javascript"></script>

  </body>
</html>
